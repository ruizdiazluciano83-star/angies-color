{% extends "base.html" %}
{% block content %}

<div class="mb-4">
  <div class="text-zinc-400 text-[11px] tracking-widest mb-1">AGENDA</div>
  <div class="text-2xl font-semibold">Nuevo turno</div>
  <div class="text-zinc-400 text-sm mt-1">Completá fecha, hora, cliente, servicio, duración, staff y salón.</div>
</div>

<form method="post" action="/turnos/nuevo" class="card p-4 space-y-4">

  <div>
    <div class="text-sm font-bold mb-2">Fecha</div>
    <input name="date_str" value="{{ date_str }}" type="date"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Hora</div>
    <input name="time_str" value="{{ time_str }}" type="time"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Cliente</div>

    <select name="client_id"
            class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
      <option value="0">+ Crear nuevo cliente</option>
      {% for c in clients %}
        <option value="{{ c.id }}">{{ c.name }} {% if c.phone %}({{ c.phone }}){% endif %}</option>
      {% endfor %}
    </select>

    <div class="mt-3 grid grid-cols-1 gap-2">
      <input name="new_client_name" placeholder="Nombre y apellido (si creás nuevo)"
             class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
      <input name="new_client_phone" placeholder="Teléfono (solo 11xxxxxxx)"
             class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
    </div>
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Servicio</div>
    <select name="specialty_id" class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
      <option value="0">— Seleccionar —</option>
      {% for s in specialties %}
        <option value="{{ s.id }}">{{ s.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Duración</div>
    <select name="duration_min" class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
      {% for m in range(15, 241, 15) %}
        <option value="{{ m }}">{{ "%02d:%02d"|format(m//60, m%60) }} hs</option>
      {% endfor %}
    </select>
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Staff</div>
    <select name="staff_id" class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
      <option value="0">— Seleccionar —</option>
      {% for st in staff %}
        <option value="{{ st.id }}">{{ st.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Salón</div>
    <select name="salon_id" class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
      {% for sl in salons %}
        <option value="{{ sl.id }}">{{ sl.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="border-t border-zinc-800 pt-4">
    <label class="flex items-center gap-2 font-bold">
      <input type="checkbox" name="deposit_paid" class="scale-125">
      Dejó seña
    </label>
    <input name="deposit_amount" type="number" placeholder="Monto seña ($)"
           class="mt-2 w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Notas del turno</div>
    <textarea name="notes" rows="4" placeholder="Tintura, agua, tiempo, etc."
              class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white"></textarea>
  </div>

  <button class="w-full py-3 rounded-2xl font-extrabold text-zinc-900"
          style="background: var(--gold);">
    Guardar turno
  </button>

</form>

{% endblock %}
