{% extends "base.html" %}
{% block content %}

<div class="flex items-center justify-between mb-4">
  <div>
    <div class="text-zinc-400 text-[11px] tracking-widest mb-1">FICHA</div>
    <div class="text-2xl font-semibold">Clientes</div>
  </div>

  <a href="#nuevo" class="px-4 py-2 rounded-2xl font-bold text-zinc-900 text-sm" style="background: var(--gold);">
    + Nuevo cliente
  </a>
</div>

<form method="get" action="/clientes" class="card p-4 mb-4">
  <input name="q" value="{{ q }}" placeholder="Buscar por nombre o teléfono..."
         class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
</form>

<div class="card overflow-hidden">
  {% if clients|length == 0 %}
    <div class="p-4 text-zinc-400">No hay clientes cargados todavía.</div>
  {% else %}
    {% for c in clients %}
      <a href="/clientes/{{ c.id }}" class="block px-4 py-3 border-b border-zinc-800/70">
        <div class="font-bold">{{ c.name }}</div>
        <div class="text-zinc-400 text-sm">
          {{ c.phone if c.phone else "—" }}
          {% if c.last_visit %}
            · Última visita: {{ c.last_visit.strftime("%d/%m/%Y") }}
          {% endif %}
        </div>
      </a>
    {% endfor %}
  {% endif %}
</div>

<div id="nuevo" class="mt-6 card p-4">
  <div class="text-xl font-bold mb-3">Nuevo cliente</div>

  <form method="post" action="/clientes/nuevo" class="space-y-3">
    <input name="name" placeholder="Nombre y apellido"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white" required>
    <input name="phone" placeholder="Teléfono"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
    <input name="email" placeholder="Email"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
    <textarea name="notes" rows="3" placeholder="Notas generales"
              class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white"></textarea>

    <button class="w-full py-3 rounded-2xl font-extrabold text-zinc-900" style="background: var(--gold);">
      Guardar cliente
    </button>
  </form>
</div>

{% endblock %}
