{% extends "base.html" %}
{% block content %}

<div class="flex items-center justify-between mb-4">
  <div>
    <div class="text-zinc-400 text-[11px] tracking-widest mb-1">FICHA</div>
    <div class="text-2xl font-semibold">Clientes</div>
  </div>
</div>

<!-- NUEVO CLIENTE ARRIBA -->
<div id="nuevo" class="card p-4 mb-4">
  <div class="flex items-center justify-between">
    <div class="text-xl font-bold">Nuevo cliente</div>
    <div class="text-zinc-400 text-xs">Cargalo rápido y seguí</div>
  </div>

  <form method="post" action="/clientes/nuevo" class="space-y-3 mt-4">
    <input name="name" placeholder="Nombre y apellido"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white" required>

    <input name="phone" placeholder="Teléfono"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">

    <input name="email" placeholder="Email"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">

    <textarea name="notes" rows="3" placeholder="Notas generales"
              class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white"></textarea>

    <button class="w-full py-3 rounded-2xl font-extrabold text-zinc-900" style="background: var(--gold);">
      Guardar cliente
    </button>
  </form>
</div>

<!-- BUSCADOR -->
<form method="get" action="/clientes" class="card p-4 mb-4">
  <input name="q" value="{{ q }}" placeholder="Buscar por nombre o teléfono..."
         class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
</form>

<!-- LISTADO -->
<div class="card overflow-hidden">
  {% if clients|length == 0 %}
    <div class="p-4 text-zinc-400">No hay clientes cargados todavía.</div>
  {% else %}
    {% for c in clients %}
      <a href="/clientes/{{ c.id }}" class="block px-4 py-3 border-b border-zinc-800/70 hover:bg-white/5">
        <div class="font-bold">{{ c.name }}</div>
        <div class="text-zinc-400 text-sm">
          {{ c.phone if c.phone else "—" }}
          · Última visita: {{ c.last_visit.strftime("%d/%m/%Y") if c.last_visit else "—" }}
        </div>
      </a>
    {% endfor %}
  {% endif %}
</div>

{% endblock %}
