{% extends "base.html" %}
{% block content %}

<div class="mb-4">
  <div class="text-zinc-400 text-[11px] tracking-widest mb-1">FICHA</div>
  <div class="text-2xl font-semibold">{{ c.name }}</div>
  <div class="text-zinc-400 text-sm mt-1">
    Última visita:
    {% if c.last_visit %}{{ c.last_visit.strftime("%d/%m/%Y") }}{% else %}—{% endif %}
  </div>
</div>

<form method="post" action="/clientes/{{ c.id }}/editar" class="card p-4 space-y-3">
  <div>
    <div class="text-sm font-bold mb-2">Nombre</div>
    <input name="name" value="{{ c.name }}"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white" required>
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Teléfono</div>
    <input name="phone" value="{{ c.phone }}"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Email</div>
    <input name="email" value="{{ c.email }}"
           class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">
  </div>

  <div>
    <div class="text-sm font-bold mb-2">Notas (tintura usada, agua, tiempo, etc.)</div>
    <textarea name="notes" rows="6"
              class="w-full px-4 py-3 rounded-2xl bg-black/30 border border-zinc-800 text-white">{{ c.notes }}</textarea>
  </div>

  <button class="w-full py-3 rounded-2xl font-extrabold text-zinc-900" style="background: var(--gold);">
    Guardar cambios
  </button>
</form>

<div class="mt-5 card p-4">
  <div class="text-xl font-bold mb-3">Historial de turnos</div>

  {% if history|length == 0 %}
    <div class="text-zinc-400">Todavía no tiene turnos registrados.</div>
  {% else %}
    <div class="space-y-2">
      {% for a in history %}
        <div class="px-4 py-3 rounded-2xl border border-zinc-800 bg-white/5">
          <div class="font-extrabold">
            {{ a.date.strftime("%d/%m/%Y") }} · {{ a.start_time.strftime("%H:%M") }}
          </div>
          <div class="text-zinc-300 text-sm mt-1">
            {% if a.specialty %}
              <span class="font-bold" style="color: {{ a.specialty.color_hex }}">{{ a.specialty.name }}</span>
            {% else %}
              <span class="font-bold">TRABAJO</span>
            {% endif %}
            · {{ a.duration_min }} min
            {% if a.deposit_paid %} · Seña ${{ a.deposit_amount }}{% endif %}
          </div>
          {% if a.notes %}
            <div class="text-zinc-400 text-sm mt-1">{{ a.notes }}</div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>

<form method="post" action="/clientes/{{ c.id }}/borrar" class="mt-4">
  <button class="w-full py-3 rounded-2xl font-extrabold border border-zinc-800 bg-white/5">
    Eliminar cliente
  </button>
</form>

{% endblock %}
